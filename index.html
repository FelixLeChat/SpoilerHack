<head>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script>
		window.onload = function() {

			// Get references to elements on the page.
			var form = document.getElementById('message-form');
			var messageField = document.getElementById('message');
			var socketStatus = document.getElementById('status');
			var updateStatus = document.getElementById('update');
			var hashtaglist = document.getElementById('hashtagList');
			var list = [];

			// Create a new WebSocket.
			var socket = new WebSocket('ws://websocket-spoileralert.herokuapp.com');


			// Handle any errors that occur.
			socket.onerror = function(error) {
				console.log('WebSocket Error: ' + error);
			};
			// Show a connected message when the WebSocket is opened.
			socket.onopen = function(event) {
				socketStatus.innerHTML = 'Connected to server.';
				socketStatus.className = 'open';
			};
			// Handle messages sent by the server.
			socket.onmessage = function(event) {
				var data = JSON.parse(event.data);
			};
			// Show a disconnected message when the WebSocket is closed.
			socket.onclose = function(event) {
				socketStatus.innerHTML = 'Disconnected from server.';
				socketStatus.className = 'closed';
			};


			// Send a message when the form is submitted.
			form.onsubmit = function(e) {
				e.preventDefault();

				// get selected hash
				var message = messageField.value;
				message = message.toLowerCase();

				List.push(message);

				hashtaglist.append("
					<button class=\"btn btn-primary\" type=\"button\">"+
					message + "<span class=\"badge\">X</span>
					</button>");

				return false;
			};


			// Close the WebSocket connection when the close button is clicked.
			closeBtn.onclick = function(e) {
				e.preventDefault();

				// Close the WebSocket.
				socket.close();

				return false;
			};
		};
	</script>
</head>

<div id="page-wrapper">
	<h1>Twitter Spoiler Alert</h1>

	<div id="status">Connecting...</div>
	<div id="update">Waiting for input...</div>

	<form id="message-form" action="#" method="post">
		<input type="text" id="message" placeholder="Write the # to watch" required>
		<button type="submit">Add #</button>
		<button type="button" id="close">Close Connection</button>
	</form>

	<div id="hashtagList"></div>
</div>
<div id="page-wrapper">
	Previous :<b><div id="winner">&nbsp</div></b>
	<ul id="messages">
	</ul>
</div>